<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>canvas discussion assistant</title>
		<link
			rel="stylesheet"
			href="popup.css" />
	</head>
	<body>
		<div class="container">
			<header>
				<h1>canvas discussion assistant</h1>
				<p class="subtitle">configure your api settings</p>
			</header>
			<div class="help-section">
				<p><strong>setup:</strong></p>
				<ul>
					<li>
						<strong>Gemini API (free):</strong>
						<a
							href="https://aistudio.google.com/api-keys"
							target="_blank"
							class="help-link">
							get your key →
						</a>
					</li>
					<li>
						<strong>Claude API (paid):</strong>
						<a
							href="https://console.anthropic.com/settings/keys"
							target="_blank"
							class="help-link">
							get your key →
						</a>
					</li>
				</ul>
				<p><strong>usage:</strong> Navigate to a Canvas discussion and click the "Generate Response" or "Generate Reply" buttons next to Reply buttons.</p>
			</div>
			<main>
				<div
					class="status-banner"
					id="statusBanner"
					style="display: none"></div>

				<form id="settingsForm">
					<div class="form-group">
						<label for="aiProvider">AI Provider</label>
						<select
							id="aiProvider"
							name="aiProvider">
							<option value="claude">Claude</option>
							<option value="gemini">Gemini</option>
						</select>
					</div>

					<div
						class="form-group"
						id="claudeApiKeyGroup">
						<label for="apiKey">Claude API Key *</label>
						<input
							type="password"
							id="apiKey"
							name="claudeApiKey"
							placeholder="sk-ant-api..." />
						<small
							>Your Claude API key is stored locally and never shared</small
						>
					</div>

					<div
						class="form-group"
						id="geminiApiKeyGroup"
						style="display: none">
						<label for="geminiApiKey">Gemini API Key *</label>
						<input
							type="password"
							id="geminiApiKey"
							name="geminiApiKey"
							placeholder="AIza..." />
						<small
							>Your Gemini API key is stored locally and never shared</small
						>
					</div>

					<div
						class="form-group"
						id="modelGroup">
						<label for="model">Model</label>
						<select
							id="model"
							name="claudeModel">
							<option value="claude-sonnet-4-5-20250929"
								>Claude Sonnet 4.5 (recommended)</option
							>
							<option value="claude-3-5-haiku-20241022"
								>Claude 3.5 Haiku (faster)</option
							>
							<option value="claude-opus-4-1-20250805">Claude Opus 4.1</option>
						</select>
					</div>

					<div
						class="form-group"
						id="geminiModelGroup"
						style="display: none">
						<label for="geminiModel">Gemini Model</label>
						<select
							id="geminiModel"
							name="geminiModel">
							<option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
							<option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
						</select>
					</div>

					<div class="form-group">
						<label for="temperature">creativity (temperature)</label>
						<input
							type="range"
							id="temperature"
							name="temperature"
							min="0"
							max="1"
							step="0.1"
							value="0.7" />
						<div class="range-labels">
							<span>focused (0.0)</span>
							<span id="temperatureValue">0.7</span>
							<span>creative (1.0)</span>
						</div>
					</div>

					<div class="form-group">
						<label for="maxTokens">max response length</label>
						<input
							type="number"
							id="maxTokens"
							name="maxTokens"
							min="100"
							max="4096"
							step="100"
							value="1000" />
						<small>maximum tokens per response (100-4096)</small>
					</div>

					<div class="form-group">
						<label for="sideInstructions"
							>additional instructions (optional)</label
						>
						<textarea
							id="sideInstructions"
							name="sideInstructions"
							rows="4"
							placeholder="e.g., write in a casual style, use shorter sentences, avoid specific topics..."></textarea>
						<small
							>extra guidance for writing style, tone, or content
							preferences</small
						>
					</div>

					<button
						type="submit"
						class="btn btn-primary"
						>save settings</button
					>
				</form>

				<div class="history-section">
					<div class="section-header">
						<p><strong>recent posts</strong></p>
						<button
							id="toggleHistory"
							class="btn-link"
							>show history</button
						>
					</div>
					<div
						id="historyContent"
						style="display: none">
						<p class="empty-history">no posts generated yet</p>
					</div>
				</div>
			</main>
		</div>

		<script src="popup.js"></script>
	</body>
</html>
